<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì—°ì•  ì‹œë®¬ë ˆì´ì…˜</title>
  <style>
/* ê³µí†µ ì„¤ì • */
* {margin: 0;padding: 0;box-sizing: border-box;}

/* í°íŠ¸ */
@font-face {
  font-family: 'DungGeunMo';
  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}

body, html {
  height: 100%;
  width: 100%;
  background: #008080;
  font-family: 'Courier New', monospace;
}

/* ê¸°ë³¸ ì°½ êµ¬ì„± */
.window-frame {
  position: relative;
  width: 800px;
  height: 600px;
  margin: 30px auto;
  border: 3px solid #F7F7F7;
  box-shadow: 8px 8px 0 #404040;
  background: #c0c0c0;
  display: flex;
  flex-direction: column;
}

.title-bar {
  background: #000080;
  color: #fff;
  padding: 6px 12px;
  font: normal 12px 'DungGeunMo', monospace;
}

.content-area {
  position: relative;
  flex: 1;
  overflow: hidden;
}

/* ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì • */
.blur-bg {
  filter: blur(4px);
  position: absolute;
  max-height: 100%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  object-fit: contain;
  z-index: 0;
}

.no-blur {
  filter: none;
  position: absolute;
  max-height: 100%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  object-fit: contain;
  z-index: 0;
}

/* ìƒíƒœ íŒ¨ë„ (í˜¸ê°ë„ ë“±) */
.status-panel {
  position: absolute;
  top: 10px;
  left: 10px;
  background: rgba(0,0,0,0.5);
  color: #fff;
  padding: 8px 12px;
  border: 1px solid #fff;
  font: 14px/1.4 'DungGeunMo', monospace;
  z-index: 10;
  width: 160px;
}

.affection {
  margin-top: 6px;
  cursor: pointer;
}

.affection-bar {
  width: 100%;
  height: 8px;
  background: #333;
  border: 1px solid #aaa;
  margin-top: 4px;
}

.affection-fill {
  height: 100%;
  background: #ff5e99;
  transition: width 0.4s ease;
}

/* í˜¸ê°ë„ ì„¤ëª… íŒì—… */
.affection-info-window {
  position: absolute;
  top: 180px;
  left: 20px;
  width: 280px;
  background: #c0c0c0;
  border: 3px solid #808080;
  box-shadow: 4px 4px 0 #404040;
  font-family: 'DungGeunMo', monospace;
  z-index: 20;
}

.popup-title {
  background: #000080;
  color: #fff;
  padding: 4px 8px;
  font: 14px 'DungGeunMo', monospace;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.popup-close {
  cursor: pointer;
}

.popup-content {
  padding: 12px;
  background: #e0e0e0;
  color: #000;
  font: 13px 'DungGeunMo', monospace;
}

/* ìºë¦­í„° ì´ë¯¸ì§€ */
.character {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  height: 100%;
  max-height: 100%;
  object-fit: contain;
  z-index: 4;
}

/* ëŒ€í™”ì°½ */
.dialogue-box {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 120px; 
  background: rgba(0,0,0,0.7);
  color: #fff;
  padding: 16px 20px;
  font-size: 16px;
  line-height: 1.5;
  border-top: 2px solid #fff;
  z-index: 10;
  font-family: 'DungGeunMo', monospace;
}

.character-name {
  font-weight: bold;
  color: #0ff;
  margin-bottom: 6px;
}

.next-button {
  display: inline-block;
  margin-top: 10px;
  color: #ff0;
  cursor: pointer;
  font: bold 18px 'DungGeunMo', monospace;
}

/* ì–´ë‘ìš´ í™”ë©´ ì—°ì¶œ (ì»·ì‹  ë“±) */
.dim-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  z-index: 5;
  display: none;
}

/* ì„ íƒì§€ ë°•ìŠ¤ */
#choiceBox {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'DungGeunMo', monospace;
  z-index: 30;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

#choiceBox button {
  padding: 12px 20px;
  background: rgba(0, 0, 0, 0.7);
  border: 2px solid #fff;
  color: #fff;
  font-family: 'DungGeunMo', monospace;
  font-size: 16px;
  cursor: pointer;
  width: 300px;
  text-align: center;
  transition: background 0.2s;
}

#choiceBox button:hover {
  background: rgba(0, 0, 0, 0.2);
}

/* ì‚¬ì´ë“œ ë²„íŠ¼ ì˜ì—­ (ë©”ëª¨ì¥ ë“±) */
.side-buttons {
  position: fixed;
  top: 10px;
  left: 10px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 50;
}

.side-buttons button {
  width: 60px;
  background: transparent;
  border: none;
  padding: 0;
  cursor: pointer;
}

.side-buttons img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* ë©”ëª¨ì¥ íŒì—… */
.notepad-popup {
  position: absolute;
  top: 80px;
  left: 100px;
  width: 320px;
  background: #F7F7F7;
  border: 3px solid #F7F7F7;
  box-shadow: 4px 4px 0 #404040;
  font-family: 'DungGeunMo', monospace;
  z-index: 999;
}

.notepad-popup .popup-title {
  background: #000080;
  color: white;
  padding: 6px 10px;
  font-size: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.notepad-popup .popup-close {
  cursor: pointer;
}

.notepad-popup .popup-content {
  padding: 12px;
  background: #e0e0e0;
  color: black;
  font-size: 13px;
  line-height: 1.5;
}

  </style>
</head>
<body>

<!-- âš™ï¸ ì‚¬ì´ë“œ ë²„íŠ¼ë“¤ (ì¢Œì¸¡ ê³ ì •) -->
<div class="side-buttons">
  <button onclick="location.href='info.html'"><img src="ì´ë¯¸ì§€/ë‚´ì»´í“¨í„°.png" alt="ë‚´ ì»´í“¨í„°"></button>
  <button><img src="ì´ë¯¸ì§€/ì¸í„°ë„·.png" alt="ì¸í„°ë„·"></button>
  <button><img src="ì´ë¯¸ì§€/ë©”ëª¨ì¥.png" alt="ë©”ëª¨ì¥"></button>
  <button><img src="ì´ë¯¸ì§€/í´ë”.png" alt="í´ë”"></button>
  <button onclick="location.href='home.html'"><img src="ì´ë¯¸ì§€/íœ´ì§€í†µ.png" alt="íœ´ì§€í†µ"></button>
  <button onclick="location.href='index.html'"><img src="ì´ë¯¸ì§€/ì¹´ë¼ì–‘ì–‘.png" alt="ì¹´ë¼ì–‘ì–‘"></button>
</div>

<!-- ğŸ–¥ ë©”ì¸ ê²Œì„ í™”ë©´ -->
<div class="window-frame">
  <div class="title-bar">ğŸ’¾ ìƒì–´ë²„ë¦° ëˆˆ ì°¾ê¸° ëŒ€-ì†Œ-ë™!</div>
  <div class="content-area">
    <!-- ë°°ê²½ ì´ë¯¸ì§€ -->
    <img id="background" src="ì´ë¯¸ì§€/ë°°ê²½.png" class="blur-bg" alt="ë°°ê²½">

    <!-- ìºë¦­í„° ì´ë¯¸ì§€ -->
    <img id="charImg" class="character" src="ì´ë¯¸ì§€/ì´ˆê¸°.png" alt="ìºë¦­í„°">

    <!-- ì–´ë‘ìš´ í™”ë©´ ì˜¤ë²„ë ˆì´ -->
    <div id="dimOverlay" class="dim-overlay"></div>

    <!-- ë°°ê²½ ìŒì•… (ìˆ¨ê¹€) -->
    <iframe width="0" height="0" 
      src="https://www.youtube.com/embed/wefAT9LZ_BM?autoplay=1&loop=1&playlist=wefAT9LZ_BM" 
      frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

    <!-- ìƒíƒœ í‘œì‹œ (ë‚ ì§œ/í˜¸ê°ë„) -->
    <div class="status-panel" id="statusPanel">
      <div id="gameDate">13ì›” 7ì¼</div>
      <div id="affection" class="affection">
        í˜¸ê°ë„ â™¥ <span id="affectionValue">5</span>
        <div class="affection-bar">
          <div id="affectionFill" class="affection-fill" style="width:5%"></div>
        </div>
      </div>
    </div>

    <!-- í˜¸ê°ë„ íŒì—… ì •ë³´ì°½ -->
    <div id="affectionInfo" class="affection-info-window" style="display:none;">
      <div class="popup-title">ğŸ’¬ í˜¸ê°ë„ ì •ë³´ <span id="closeAffectionInfo" class="popup-close">X</span></div>
      <div id="affectionInfoContent" class="popup-content"></div>
    </div>

    <!-- ëŒ€í™”ì°½ -->
    <div class="dialogue-box" id="dialogueBox">
      <div id="charName" class="character-name">ì–‘ì–‘</div>
      <div id="dialogueText" class="dialogue-text">ì‹œì‘ ëŒ€ì‚¬</div>
      <div id="nextBtn" class="next-button">â–¼</div>
    </div>

    <!-- ì„ íƒì§€ ë°•ìŠ¤ -->
    <div id="choiceBox"></div>
  </div>
</div>

  <!-- ğŸ“ ë©”ëª¨ì¥ íŒì—… -->
<div id="notepadPopup" class="notepad-popup" style="display:none;">
  <div class="popup-title">ğŸ“ ì œëª© ì—†ìŒ <span id="closeNotepad" class="popup-close">X</span></div>
  <div class="popup-content">
    ë‚´ ì»´í“¨í„°ë¥¼ ëˆ„ë¥´ë©´ ìºë¦­í„° ì •ë³´ë¥¼ í™•ì¸.<br>
    íœ´ì§€í†µì„ ëˆ„ë¥´ë©´ ì‹œë®¬ë ˆì´ì…˜ ì´ˆê¸°í™”.<br>
    í˜ì–´ ì•„ì´ì½˜ì„ ëˆ„ë¥´ë©´ ë©”ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
  </div>
</div>

<!-- ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘ -->
<script>
// ë©”ëª¨ì¥ íŒì—… ê´€ë ¨
const notepadPopup = document.getElementById('notepadPopup');
const closeNotepad = document.getElementById('closeNotepad');
const memoBtn = document.querySelector('img[alt="ë©”ëª¨ì¥"]').parentElement;

memoBtn.addEventListener('click', () => {
  notepadPopup.style.display = 'block';
});
closeNotepad.addEventListener('click', () => {
  notepadPopup.style.display = 'none';
});

// ê¸°ë³¸ ë³€ìˆ˜ë“¤
let index = 0;
let affection = 5;
let choiceShown = false;

// ëŒ€ì‚¬ ë°°ì—´
let dialogues = [
  { name: '-', text: 'ì´ˆì„¸ê³„ê¸‰ ë¯¸ë˜ê¸°ê´€' },
  { name: '-', text: 'ì´ê³³ì€ ë‚´ê°€ ì¼í•˜ëŠ” ê³³ì´ë‹¤.' },
  { name: '-', text: 'ëª¨ë“  ì§ì¥ì´ ê·¸ë ‡ë“¯ ì¬ë°ŒëŠ” ì¼ì´ë¼ê³ ëŠ” ë‹¨ í•˜ë‚˜ë„ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤.' },
  { name: '-', text: 'ì ˆë§ì´ë¼ë„ êµ¬ê²½í•˜ê³  ì£½ëŠ”ë‹¤ë©´ ì €ìŠ¹ì—ì„œ í•  ì–˜ê¸°ê°€ ìƒê¸¸ í…ë° ë§ì´ë‹¤.' },
  { name: '-', text: 'ì§€ë¶€ì¥ ë‹˜ì´ ì˜¤ì…¨ë‚˜?', bg: 'ì´ë¯¸ì§€/ì»·ì”¬.png' },
  { name: '-', text: 'ì–´ë ¤ë³´ì´ì§€ë§Œ ì € ì—¬ìëŠ” 9ì§€ë¶€ì˜ ì§€ë¶€ì¥, ë¥˜ì›¨ì´.' },
  { name: '-', text: 'ì„±ë…„ì´ ë˜ê¸° ì „ ë„ì¶•ì—…ìë¡œì„œ ì¬ëŠ¥ì„ ì¸ì • ë°›ì•˜ê³ , ë©°ì¹  ì „ ì§€ë¶€ì¥ ìë¦¬ì— ì˜¬ëë‹¤.' },
  { name: '-', text: 'ì§€ì¼œë³´ë‹ˆ í™•ì‹¤íˆ ë¦¬ë” ì¼ì—ëŠ” ë§ëŠ” ê²ƒ ê°™ì€ë°, ì—­ì‹œ ì§€ë¶€ì¥ì´ ë˜ê¸°ì—” ì–´ë¦¬ë‹¤.' },
  { name: '-', text: 'ê·¸ íƒ“ì— ì‹œê¸°í•˜ëŠ” ì‚¬ëŒë„ ìˆëŠ” ëª¨ì–‘ì´ê³ .' },
  { name: '-', text: 'ì§€ì§€ ì•Šê³  ë§ëŒ€ì‘ì€ í•˜ê³  ê³„ì‹  ê²ƒ ê°™ì§€ë§Œ, ì—¬ëŸ¬ëª¨ë¡œ í˜ë“œì‹œê² ì§€.' },
  { name: '???', text: 'â€¦ ë­í•˜ê³  ìˆì–´?', bg: 'ì´ë¯¸ì§€/ë°°ê²½.png', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png', choice: true },
];

// ë¶„ê¸° ì‹œë‚˜ë¦¬ì˜¤ë“¤
const branchA = [
  { name: 'SYSTEM', text: 'ì¼ìˆœ ê·¸ë…€ê°€ ë¯¸ê°„ì„ ì°Œí‘¸ë ¸ë‹¤.', img: 'ì´ë¯¸ì§€/ì§œì¦.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ëˆ„êµ´ ê±±ì •í•  ìœ„ì¹˜ë¼ê³  ìƒê°í•˜ëŠ” ê±´ì§€.', img: 'ì´ë¯¸ì§€/ë²„ëŸ­.png' }, 
  { name: '-', text: 'ì´ê²Œ ì•„ë‹Œë°â€¦ ì˜ˆë¯¼í•˜ë„¤.' }, 
  { name: '-', text: 'í™•ì‹¤íˆ ì§€ë¶€ì¥ ìë¦¬ì— ì˜¤ë¥¸ ì´í›„ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ê³  ìˆëŠ” ëª¨ì–‘ì´ë‹¤.' },
  { name: 'SYSTEM', text: 'ê·¸ í›„ë¡œ ê´œíˆ ì°” ë¶€ë¦° ê²ƒì´ ìª½íŒ”ë ¸ë˜ ë¥˜ì›¨ì´ëŠ” ì£¼ì¸ê³µì„ í”¼í•´ë‹¤ë‹ˆê¸° ì‹œì‘í–ˆë‹¤.',
    img: 'ì´ë¯¸ì§€/ê²Œì„ì˜¤ë²„.png', end: true }
];

const branchB = [
  { name: '-', text: 'ê·¸ë…€ëŠ” ì ì‹œ ë†€ë€ ì–¼êµ´ë¡œ ë‚˜ë¥¼ ë°”ë¼ë³´ì•˜ë‹¤.', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ì•„ì§ í•œ ê²ƒë„ ì—†ëŠ”ë°â€¦ ê°‘ìê¸°.', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ë°”ë¼ëŠ” ê±°ë¼ë„ ìˆë‚˜ë´?', img: 'ì´ë¯¸ì§€/ë¶€ë„.png' },
  { name: '-', text: 'ê·¸ë˜ë„ ê¸°ë¶„ì€ ì¢‹ì•„ë³´ì¸ë‹¤. ì €ëŸ° ë§ë¡œ í™”ì œë¥¼ ë°”ê¾¸ëŠ” ê²Œ ì–´ë¦° í‹°ê°€ ë‚œë‹¤.' }, 
  { name: '-', text: 'ì§€ê¸ˆì€ í¸ì´ ë˜ì–´ì£¼ëŠ” ì‚¬ëŒì´ ê°„ì ˆí•  í…Œë‹ˆê¹Œ.' }, 
  { name: '-', text: 'ë‚˜ëŠ” ì†ì‚¬ë ˆë¥¼ ì¹˜ë©° ì›ƒì—ˆë‹¤. ë°”ë¼ëŠ” ê²ƒì€ ì—†ë‹¤ë©´ì„œ.' }, 
  { name: '-', text: 'ì•„ì§ ì§€ë¶€ ë‚´ì—ì„œ í˜ë„ ë³„ë¡œ ì—†ì„ í…ë° ë§ì´ì§€.' }, 
  { name: 'ë¥˜ì›¨ì´', text: 'ë°”ë¼ëŠ” ê²ƒì´ ì—†ë‹¤ë©´ ëì–´. â€¦ ëŒì•„ê°€ì§€.', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: '-', text: 'ë‚˜ëŠ” ê°„ë‹¨í•˜ê²Œ ê³ ê°œë¥¼ ìˆ™ì˜€ë‹¤. ì§€ë¶€ì¥ì€ ì§€ë¶€ì¥ì´ë‹ˆê¹Œ.' }, 
  { name: '-', text: 'ì—­ì‹œ ì•„ì§ì€ ë‚˜ì— ëŒ€í•´ ì•„ë¬´ëŸ° ìƒê°ë„ ì—†ëŠ” ëª¨ì–‘ì´ë‹¤.' }, 
  { name: '-', text: 'ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ë„ ëŒ€í™”ë¥¼ ìì£¼ í•˜ëŠ” ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤.' }, 
  { name: '-', text: 'ì•„ë¬´ë¦¬ ê·¸ë˜ë„ ì™¸ë¡­ì§€ëŠ” ì•Šì„ê¹Œ? â€¦ ê´œí•œ ì°¸ê²¬ì´ë‹¤.' }, 
  { name: '-', text: 'ìŠ¬ìŠ¬ í‡´ê·¼ì´ë‚˜ í•˜ì.' }, 

  { name: 'SYSTEM', text: 'â€• ë‹¤ìŒ ë‚ , 7ì›” 8ì¼.', bg: 'ì´ë¯¸ì§€/ì˜¥ìƒ.png', date: '7ì›” 8ì¼' },
  { name: '-', text: 'ë°¤ë§ˆë‹¤ ì˜í™”ë‚˜ í•œ í¸ ë³´ê³  ìëŠ” ì´ ì¼ìƒì´ ì§€ê²¹ë‹¤.' }, 
  { name: '-', text: 'ì˜¤ëŠ˜ë„ ì¶œê·¼í•´ë²„ë ¸ê³  ë§ì´ì§€.' }, 
  { name: '-', text: 'ë‹´ë°°ë¥¼ í”¼ìš´ ë’¤ì— ì¼ì„ ì‹œì‘í•´ë³´ì‹¤ê¹Œâ€¦ ì‘?' }, 
  { name: '-', text: 'ëˆ„êµ°ê°€ ìˆëŠ” ëª¨ì–‘ì´ë‹¤. â€¦ ë‚˜ëŠ” ì™œ ìˆ¨ì€ ê±°ì§€.' }, 
  { name: '-', text: 'ëª©ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ë‹ˆ ì§€ë¶€ì¥ ë‹˜ì´ ê³„ì‹  ë“¯í•˜ë‹¤.' }, 
  { name: '-', text: 'ê·¸ë¦¬ê³ â€¦ ì²˜ìŒ ë“¤ì–´ë³´ëŠ” ëª©ì†Œë¦¬ì˜ ë‚¨ì.' }, 
  { name: '-', text: 'ë¶„ìœ„ê¸°ëŠ” ê´œì°®ì•„ ë³´ì´ëŠ”ë°, ëˆ„êµ¬ì§€?', choice: 'B1' }, 
];

const branchB1 = [
  { name: '-', text: 'ë¼ì–´ë“¤ì–´ì„œ ë­˜ í•˜ê² ë‹¤ê³ â€¦ ìˆ¨ì–´ìˆë‹¤ê°€ ê°€ì.' }, 
  { name: '-', text: 'íœ´ëŒ€í°ìœ¼ë¡œ ê²Œì„ì´ë‚˜ ë§Œì§€ì‘ê±°ë¦¬ê³  ìˆìœ¼ë‹ˆ, ì´ë‚´ ë‘ ì‚¬ëŒì´ ë¬¸ ê·¼ì²˜ë¡œ ë‹¤ê°€ì˜¤ëŠ” ì†Œë¦¬ê°€ ë“¤ë ¸ë‹¤.' }, 
  { name: '-', text: 'ìœ½â€¦ ì˜ëª»í•œ ê²ƒë„ ì—†ëŠ”ë° ì™œ ìˆ¨ì–´ì•¼ í•˜ëŠ” ê±°ì•¼.' }, 
  { name: 'ë¥˜ì›¨ì´', text: 'ê·¸ëŸ¬ë‹ˆê¹Œ, ë©‹ëŒ€ë¡œ ì•„ëŠ” ì²™ì€â€¦.' },
  { name: '???', text: 'ê·¸ëŸ° ì†Œë¦¬ë¥¼ ë“£ê³  ìˆëŠ”ë° ì–´ë–»ê²Œ ì¡°ìš©íˆ ìˆì–´ìš”?' },
  { name: '???', text: 'ë‚˜ëŠ” ì•ìœ¼ë¡œë„ ì•„ëŠ” ì²™í•  ê±´ë°.' },
  { name: 'ë¥˜ì›¨ì´', text: 'â€¦ ë°”ë³´ì•¼! ëì–´, ëŒì•„ê°€â€¦. ì—°ë½í•  í…Œë‹ˆê¹Œ.' },
  { name: '???', text: 'ì •ë§ì´ì£ ?' },
  { name: 'ë¥˜ì›¨ì´', text: 'ë‚œ ì•½ì†ì€ ì§€í‚¤ê±°ë“œì€â€¦ ë¨¼ì € ê°€.' },
  { name: '-', text: 'ì‹¸ìš°ëŠ” ê±°ì˜€ë‚˜? ê·¸ëŸ° ê²ƒì¹˜ê³ â€¦.' }, 
  { name: '-', text: 'ë‚¨ì„±ì˜ êµ¬ë‘ ì†Œë¦¬ê°€ ë©€ì–´ì ¸ê°€ë©´, ì§€ë¶€ì¥ ë‹˜ì˜ í•œìˆ¨ ì†Œë¦¬ê°€ ë“¤ë ¤ì˜¨ë‹¤.' }, 
  { name: '-', text: 'â€¦ ì•—. ì´ìª½ì„ ë³´ì–ì•„.' }, 
  { name: '-', text: 'ì–´ìƒ‰í•˜ê²Œ ì†ì„ í”ë“¤ì–´ë³´ì•˜ì§€ë§Œ, ì—­íš¨ê³¼ì˜€ì„ê¹Œ. ë¯¸ë¬˜í•œ í‘œì •ìœ¼ë¡œ ê·¸ë…€ê°€ ë‚´ê²Œ ë‹¤ê°€ì˜¨ë‹¤.' }, 
  { name: 'ë¥˜ì›¨ì´', text: 'ëŒ€í™”ë¥¼ ì—¿ë“£ëŠ” ì·¨ë¯¸ê°€ ìˆëŠ” ì¤„ ëª°ëë„¤.', img: 'ì´ë¯¸ì§€/ì§œì¦.png' },
  { name: '-', text: 'ì–´ë–¡í•˜ì§€?', choice: 'B1_1' }, 
];

const branchB2 = [
  { name: 'ë¥˜ì›¨ì´', text: 'â€¦!?', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: '-', text: 'ì§€ë¶€ì¥ ë‹˜ê³¼ ì²˜ìŒ ë³´ëŠ” ì¥ì‹ ì˜ ë‚¨ì„±ì€ ë‹¤ì†Œ ë†€ë€ ì–¼êµ´ë¡œ ë‚˜ë¥¼ ë°”ë¼ë³´ì•˜ë‹¤.', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: '-', text: 'ë…¸ë ¤ë³´ëŠ” ê²ƒë§Œ ê°™ì€ ì§€ë¶€ì¥ ë‹˜ì˜ ì–¼êµ´ì€ ê¸°ë¶„íƒ“ì¸ê°€â€¦.', img: 'ì´ë¯¸ì§€/ì§œì¦.png' },
  { name: '-', text: 'í•˜ì§€ë§Œ ë‚¨ì„±ì€ ê¸ˆë°© ì…ì— ë¯¸ì†Œë¥¼ ê±¸ê³ , ë„‰ì‚´ ì¢‹ê²Œ ì§€ë¶€ì¥ ë‹˜ê»˜ ì†ì„ í”ë“¤ì–´ë³´ì˜€ë‹¤.' },
  { name: '-', text: 'ë‹¤ìŒì— ì´ì•¼ê¸°í•´ìš”. ê·¸ëŸ° ë§ë„ ë¹¼ë†“ì§€ ì•Šì€ ì±„ ê³„ë‹¨ì„ ë‚´ë ¤ê°€ëŠ” ëª¨ìŠµ.' },
  { name: '-', text: 'â€¦ ë‘˜ë§Œ ë‚¨ê²¨ë‘ë©´ ì–´ë–¡í•˜ë¼ëŠ” ê±´ì§€. ì–´ìƒ‰í•œ ë¶„ìœ„ê¸°ê°€ ê°ëŒì•˜ë‹¤.' },
  { name: 'ë¥˜ì›¨ì´', text: 'ëŒ€í™”ë¥¼ ì—¿ë“£ëŠ” ì·¨ë¯¸ê°€ ìˆëŠ” ì¤„ ëª°ëë„¤.', img: 'ì´ë¯¸ì§€/ì§œì¦.png' },
  { name: '-', text: 'ì–´ë–¡í•˜ì§€?', choice: 'B1_1' }, 
];

const branchB1_1 = [
  { name: 'ë¥˜ì›¨ì´', text: 'â€¦.', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ë¯¸ì•ˆí•˜ê¸°ëŠ”â€¦ ì˜¤íˆë ¤ ê´œíˆ í™”ë¥¼ ë‚¸ ê²ƒ ê°™ë„¤. ì‚¬ê³¼í•˜ì§€.', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ë‹¤ìŒì— ë‹µë¡€í•  í…Œë‹ˆê¹Œâ€¦ ê·¸ëŸ¬ê³ ë³´ë‹ˆ, ì˜¥ìƒì—ëŠ” ì™œ?', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'í¡ì—° êµ¬ì—­ì€ 2ì¸µì— ìˆì„ í…ë°.', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: '-', text: 'ê·¸ê³³ì€ ì´ ì‹œê°„ì— ëŠ˜ ì‚¬ëŒì´ ë§ìœ¼ë‹ˆê¹Œ ë§ì´ë‹¤.' },
  { name: '-', text: 'ì§€ë¶€ì¥ ë‹˜ë„ í¡ì—°ìë©´ì„œ, ê°œì¸ ì‚¬ë¬´ì‹¤ì´ ìƒê²¼ë‹¤ê³  ì½”ë¹¼ê¸°ë„ ì•ˆ ë¹„ì¶”ê¸° ì‹œì‘í–ˆì§€.' },
  { name: '-', text: 'ì € ê°™ì€ ì¼ë°˜ ì‚¬ì›ë„ ì—¬ìœ ë¥¼ ì¦ê¸¸ ì‹œê°„ì´ í•„ìš”í•˜ë‹¤ê³ ìš”!' },
  { name: '-', text: 'ê·¸ëŸ° ë§ë“¤ì„ ì •ì¤‘í•˜ê²Œ ì¹˜í™˜í•˜ì—¬ ë‚´ë±‰ê³  ë‚˜ë‹ˆ, ì§€ë¶€ì¥ ë‹˜ë„ í‘œì •ì´ í’€ë¦° ë“¯í•˜ë‹¤.' },
  { name: '-', text: 'ì €ê±´ ë‚˜ë¦„ ì›ƒê³  ê³„ì‹  ê±°ê² ì§€. íœ´.' },
  { name: '-', text: 'â€¦ í•¨ê»˜ ìˆì—ˆë˜ ë‚¨ì„± ë¶„ì— ëŒ€í•´ ë¬¼ì–´ë³¼ íƒ€ì´ë°ì¸ê°€?' },
  { name: 'ë¥˜ì›¨ì´', text: 'ê°™ì´ ìˆë˜ ê±°, ëˆ„êµ¬ëƒê³ ?', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: '-', text: 'ê¶ê¸ˆí•´ ì£½ì„ ì§€ê²½ì…ë‹ˆë‹¤.' },
  { name: 'ë¥˜ì›¨ì´', text: 'â€¦ ê·¸ëƒ¥ ì•„ëŠ” ì‚¬ëŒ. ë©ì²­ì´. ì´ëŸ° ê²Œ ì™œ ê¶ê¸ˆí•œ ê±°ì•¼â€¦.', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: '-', text: 'ì €ëŸ° ë§ì„ ì„œìŠ´ ì—†ì´ ë‚´ë±‰ëŠ” ê²ƒì„ ë³´ë©´ ì¹œí•œ ì‚¬ì´ì¸ ê±°ê² ì§€.' },
  { name: '-', text: 'ë§ ì¡°ì‹¬í•˜ëŠ” ê²Œ ì¢‹ê² ë‹¤.' },
  { name: '-', text: 'ë‚¨ìì¹œêµ¬ì„¸ìš”?' },
  { name: 'ë¥˜ì›¨ì´', text: 'ë­, ë­£â€¦.', img: 'ì´ë¯¸ì§€/ë‹¹í™©.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ì–´ë”œ ë³´ê³ !? ì£½ê³  ì‹¶ì–´â€¦!?', img: 'ì´ë¯¸ì§€/í˜¼ë¯¸.png' },
  { name: '-', text: 'ì‚´í•´ í˜‘ë°•ê¹Œì§€â€¦!?' },
  { name: '-', text: 'ì•„ë¬´ë˜ë„ ì •ê³¡ì„ ì°Œë¥¸ ëª¨ì–‘ì´ë‹¤.' },
];

const branchB1_2 = [
  { name: 'ë¥˜ì›¨ì´', text: 'â€¦.', img: 'ì´ë¯¸ì§€/ì§œì¦.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ê·¸ë˜, ì¡°ì‹¬ì„±ì´ ì—†ëŠ” ìš°ë¦¬ ì˜ëª»ì´ì—ˆë„¤.', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: 'ë¥˜ì›¨ì´', text: 'ë¯¸ì•ˆâ€¦ ì´ë§Œ ëŒì•„ê°€ë„ë¡ í•˜ì§€.', img: 'ì´ë¯¸ì§€/ì´ˆê¸°.png' },
  { name: '-', text: 'ë¹„ê¼¬ëŠ” íˆ¬ê°€ ì—­ë ¥í•œ ê²ƒì„ ë³´ë‹ˆ í™”ê°€ ë‚œ ëª¨ì–‘ì´ë‹¤. ëŒ€ì²´ ì–´ëŠ ë¶€ë¶„ì—ì„œ?' },
  { name: '-', text: 'ì €ëŸ¬ë‹ˆê¹Œ ì¸ë³µì´ ì—†ì§€â€¦ í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ì˜¤ëŠ” ê²ƒì€ ì˜ëª»ëœ ê²ƒì¼ê¹Œ.' },
  { name: '-', text: 'ë‚˜ëŠ” ì˜¥ìƒì— ë©ê·¸ë¼ë‹ˆ ë‚¨ì•„ ë‹´ë°°ë¥¼ íƒœì› ë‹¤. â€¦ ì“°ë‹¤.' },
  { name: '-', text: 'ê·¸ ë’¤ë¡œë„ ì˜ë¬¸ì˜ ë‚¨ì„±ê³¼ ì§€ë¶€ì¥ ë‹˜ì´ í•¨ê»˜ ìˆëŠ” ëª¨ìŠµì€ ì¢…ì¢… ëª©ê²©ë˜ì—ˆë‹¤.' },
  { name: '-', text: 'ë‚¨ì„±ì˜ ì´ë¦„ì€ í•˜ì¹˜ì¥¬ ë‚˜ë‚˜. ì¼ë³¸ì—ì„œ ì˜¨ ê¸°ê´€ì‚¬ë¼ê³  í•˜ëŠ”ë°â€¦.' },
  { name: '-', text: 'ê·¸ ìœ ëª…í•œ í•˜ì¹˜ì˜ í›„ê³„ì¸ ëª¨ì–‘ì´ë‹¤.' },
  { name: '-', text: 'ì  ì¥â€¦.' },
  { name: 'SYSTEM', text: 'ë¥˜ì›¨ì´ëŠ” ê·¸ ë’¤ë¡œ ì£¼ì¸ê³µì´ ì–´ë–¤ ì´ì•¼ê¸°ë¥¼ êº¼ë‚¼ì§€ ëª°ë¼ ì‚¬ë‹´ì„ ì¼ì ˆ ë‚˜ëˆ„ì§€ ì•Šì•˜ë‹¤ê³  í•œë‹¤.', img: 'ì´ë¯¸ì§€/ê²Œì„ì˜¤ë²„.png', end: true  },
];
  

// ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
const nameEl  = document.getElementById('charName');
const textEl  = document.getElementById('dialogueText');
const imgEl   = document.getElementById('charImg');
const nextBtn = document.getElementById('nextBtn');
const dimOv   = document.getElementById('dimOverlay');
const choiceBox = document.getElementById('choiceBox');
const affVal  = document.getElementById('affectionValue');
const affFill = document.getElementById('affectionFill');
const affBox  = document.getElementById('affection');
const infoWin = document.getElementById('affectionInfo');
const infoTxt = document.getElementById('affectionInfoContent');
const infoX   = document.getElementById('closeAffectionInfo');
const bgElement = document.getElementById('background');

// í˜¸ê°ë„ ì„¤ëª… ë°˜í™˜
function affectionMessage(v){
  if(v >= 80) return 'ì‚¬ë‘í•´ì„œ ì£¼ì²´í•˜ì§€ ëª»í•˜ëŠ” ì¤‘.';
  if(v >= 50) return 'ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ì—°ì¸ì´ë¼ê³  ìƒê°í•˜ëŠ” ì¤‘.';
  if(v >= 20) return 'ê³ ë§ˆìš´ ì—°ì¸ì´ë¼ê³  ìƒê°í•˜ëŠ” ì¤‘.';
  return 'ê·¸ì € ì—°ì¸ì´ë¼ê³  ìƒê°í•˜ëŠ” ì¤‘.';
}

// í˜¸ê°ë„ UI ì—…ë°ì´íŠ¸
function updateAffectionUI(){
  affVal.textContent = affection;
  affFill.style.width = `${affection}%`;
}

function updateDialogue() {
  const d = dialogues[index];
  nameEl.textContent = d.name;
  textEl.textContent = d.text;

  // âœ… ìºë¦­í„° ì´ë¯¸ì§€ ì²˜ë¦¬
  if (d.img) {
    imgEl.src = d.img;
    imgEl.style.display = 'block'; // ì´ë¯¸ì§€ í‘œì‹œ
  } else {
    imgEl.style.display = 'none';  // ì´ë¯¸ì§€ ìˆ¨ê¹€
  }

  // âœ… ë‚ ì§œ ì—…ë°ì´íŠ¸
  if (d.date) {
    document.getElementById('gameDate').textContent = d.date;
  }

  // âœ… ì–´ë‘ìš´ í™”ë©´ ì—°ì¶œ
  dimOv.style.display = d.dim ? 'block' : 'none';


  // âœ… ë°°ê²½ ì´ë¯¸ì§€ ë³€ê²½
  if (d.bg) {
    bgElement.src = d.bg;

    // ì»·ì”¬ ë°°ê²½ì¸ ê²½ìš° (íŒŒì¼ëª…ì— 'ì»·ì”¬'ì´ í¬í•¨ëœ ê²½ìš°)
    if (d.bg.includes('ì»·ì”¬')) {
      bgElement.classList.remove('blur-bg');
      bgElement.classList.add('no-blur');
    } else {
      bgElement.classList.remove('no-blur');
      bgElement.classList.add('blur-bg');
    }
  }

  dimOv.style.display = d.dim ? 'block' : 'none';
}

// ì„ íƒì§€ í‘œì‹œ ì—¬ë¶€ íŒë‹¨
function maybeShowChoice() {
  const d = dialogues[index];
  
  if (d.choice === true) {
    choiceBox.innerHTML = `
      <button onclick="choose(-5, 'A')">ì›¨ì´ ì”¨, ë­”ê°€ ë„ì™€ì¤„ê¹Œ?</button>
      <button onclick="choose(10, 'B')">ì§€ë¶€ì¥ ë‹˜, ëŠ˜ ìˆ˜ê³  ë§ìœ¼ì‹œë„¤ìš”.</button>
    `;
    choiceBox.style.display = 'flex';
    nextBtn.style.display = 'none';
    choiceShown = true;
    
  } else if (d.choice === 'B1') {
    choiceBox.innerHTML = `
      <button onclick="choose(5, 'B1')">ë‘ ì‚¬ëŒì´ ê°ˆ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.</button>
      <button onclick="choose(-5, 'B2')">ëª¨ìŠµì„ ë“œëŸ¬ë‚¸ë‹¤.</button>
    `;
    choiceBox.style.display = 'flex';
    nextBtn.style.display = 'none';
    choiceShown = true;
    
  } else if (d.choice === 'B1_1') {
    choiceBox.innerHTML = `
      <button onclick="choose(5, 'B1_1')">ì£„ì†¡í•©ë‹ˆë‹¤. ë‘ ë¶„ì´ ê³„ì‹ ì§€ ëª°ëì–´ìš”.</button>
      <button onclick="choose(-10, 'B1_2')">ë“£ê³  ì‹¶ì–´ì„œ ë“¤ì€ ê²Œ ì•„ë‹ˆì—ìš”â€¦.</button>
    `;
    choiceBox.style.display = 'flex';
    nextBtn.style.display = 'none';
    choiceShown = true;
  }
}

// ì„ íƒì§€ ì²˜ë¦¬
function choose(delta, branch){
  affection = Math.max(0, Math.min(100, affection + delta));
  updateAffectionUI();
  choiceBox.style.display = 'none';
  nextBtn.style.display = 'block';
  choiceShown = false;

  if (branch === 'A')      dialogues = branchA;
  else if (branch === 'B') dialogues = branchB;
  else if (branch === 'B1') dialogues = branchB1;
  else if (branch === 'B2') dialogues = branchB2;
  else if (branch === 'B1_1') dialogues = branchB1_1;
  else if (branch === 'B1_2') dialogues = branchB1_2;

  index = 0;
  updateDialogue();
  maybeShowChoice();
}

// ë‹¤ìŒ ë²„íŠ¼ ë™ì‘
nextBtn.addEventListener('click', () => {
  if (choiceShown) return;
  index++;
  if (index < dialogues.length) {
    updateDialogue();
    maybeShowChoice();
  } else {
    const d = dialogues[index - 1];
    if (d.end) {
      alert('ë°°ë“œ ì—”ë”©ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.');
      location.reload();
    } else {
      alert('í”Œë ˆì´í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.');
    }
  }
});

// í˜¸ê°ë„ ë°•ìŠ¤ í´ë¦­ ì‹œ ì •ë³´ íŒì—… í‘œì‹œ
affBox.addEventListener('click', ()=>{
  infoTxt.innerHTML = `í˜„ì¬ í˜¸ê°ë„ëŠ” ${affection}ì…ë‹ˆë‹¤.<br>ë‹¹ì‹ ì„ ${affectionMessage(affection)}`;
  infoWin.style.display = 'block';
});
infoX.addEventListener('click', ()=> infoWin.style.display = 'none');

// ì´ˆê¸° ì‹¤í–‰
updateAffectionUI();
updateDialogue();
</script>

</body>
</html>
